const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-Be1-m5ee.js","assets/vendor-cBPYqRmV.js","assets/About-RT28zJ6L.js","assets/Products-D6W_-gQF.js","assets/ToppingModal-CIWEQAZ8.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/Products-LRRHzmVH.css","assets/Contact-CCzBoqYe.js","assets/ProductDetail-Chn9AZOV.js","assets/ShoppingCart-CLJxRvAm.js","assets/CheckOut-BqU_roZe.js","assets/Login-Cll7AkQg.js","assets/Register-rKqRur0_.js","assets/Profile-B0xUCvv0.js","assets/NotFound-DmCSbZEd.js"])))=>i.map(i=>d[i]);
var be=Object.defineProperty,ke=Object.defineProperties;var Se=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var re=(e,t,n)=>t in e?be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,N=(e,t)=>{for(var n in t||(t={}))se.call(t,n)&&re(e,n,t[n]);if(V)for(var n of V(t))oe.call(t,n)&&re(e,n,t[n]);return e},B=(e,t)=>ke(e,Se(t));var K=(e,t)=>{var n={};for(var r in e)se.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&V)for(var r of V(e))t.indexOf(r)<0&&oe.call(e,r)&&(n[r]=e[r]);return n};var S=(e,t,n)=>new Promise((r,s)=>{var d=u=>{try{h(n.next(u))}catch(i){s(i)}},o=u=>{try{h(n.throw(u))}catch(i){s(i)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(d,o);h((n=n.apply(e,t)).next())});import{d as te,r as b,c as M,u as de,o as he,a as Ee,b as ge,e as A,f as E,g as l,h as W,i as w,w as T,j as C,k as D,t as R,n as j,l as Ie,v as Ce,m as ie,F as pe,p as me,q as G,s as Oe,T as Pe,x as Ae,y as xe,S as Ne,z as Le,A as $e,B as De,C as Me,D as qe,E as Re}from"./vendor-cBPYqRmV.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const d of s)if(d.type==="childList")for(const o of d.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const d={};return s.integrity&&(d.integrity=s.integrity),s.referrerPolicy&&(d.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?d.credentials="include":s.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(s){if(s.ep)return;s.ep=!0;const d=n(s);fetch(s.href,d)}})();const je="/Chatramue-Website-Demo/images/ChaTraMue2_a1f8934c-a3cc-46da-a2be-58cc9f716369_300x300.png",fe=e=>{const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e?t.test(e)?e.length>100?"Email không được quá 100 ký tự":null:"Email không đúng định dạng":"Email không được để trống"},ze=e=>e?e.length<6?"Mật khẩu phải có ít nhất 6 ký tự":e.length>50?"Mật khẩu không được quá 50 ký tự":/[a-zA-Z]/.test(e)?/[0-9]/.test(e)?null:"Mật khẩu phải chứa ít nhất 1 chữ số":"Mật khẩu phải chứa ít nhất 1 chữ cái":"Mật khẩu không được để trống",ve=e=>e?e.trim().length<2?"Họ và tên phải có ít nhất 2 ký tự":e.length>50?"Họ và tên không được quá 50 ký tự":/^[a-zA-ZÀ-ỹ\s]+$/.test(e)?null:"Họ và tên chỉ được chứa chữ cái và khoảng trắng":"Họ và tên không được để trống",_e=e=>e?/^(0|\+84)[3-9][0-9]{8}$/.test(e)?null:"Số điện thoại không đúng định dạng (VD: 0901234567)":null,Ve=e=>e?e.length>200?"Địa chỉ không được quá 200 ký tự":e.trim().length<5?"Địa chỉ phải có ít nhất 5 ký tự":null:null,Ut=e=>{const t={},n=ve(e.fullName);n&&(t.fullName=n);const r=_e(e.phone);r?t.phone=r:e.phone||(t.phone="Số điện thoại không được để trống khi đặt hàng");const s=fe(e.email);return s&&(t.email=s),(!e.address||e.address.trim().length<10)&&(t.address="Địa chỉ giao hàng phải có ít nhất 10 ký tự"),e.paymentMethod||(t.paymentMethod="Vui lòng chọn phương thức thanh toán"),{isValid:Object.keys(t).length===0,errors:t}},Be=e=>e.id?e.name?!e.price||e.price<=0?"Giá sản phẩm không hợp lệ":!e.quantity||e.quantity<=0?"Số lượng phải lớn hơn 0":e.quantity>10?"Số lượng không được quá 10":null:"Tên sản phẩm không hợp lệ":"ID sản phẩm không hợp lệ",L=e=>typeof e!="string"?e:e.replace(/[<>]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").trim(),He=e=>{const t=[/(\%27)|(\')|(\-\-)|(\%23)|(#)/i,/((\%3D)|(=))[^\n]*((\%27)|(\')|(\-\-)|(\%3B)|(;))/i,/\w*((\%27)|(\'))((\%6F)|o|(\%4F))((\%72)|r|(\%52))/i,/((\%27)|(\'))union/i];for(let n of t)if(n.test(e))return"Dữ liệu không hợp lệ";return null},le=e=>{const t={};for(let[n,r]of Object.entries(e))if(typeof r=="string"){e[n]=L(r);const s=He(e[n]);if(s){t[n]=s;continue}switch(n){case"email":const d=fe(e[n]);d&&(t[n]=d);break;case"password":const o=ze(e[n]);o&&(t[n]=o);break;case"fullName":const h=ve(e[n]);h&&(t[n]=h);break;case"phone":const u=_e(e[n]);u&&(t[n]=u);break;case"address":const i=Ve(e[n]);i&&(t[n]=i);break}}return{isValid:Object.keys(t).length===0,errors:t,sanitizedData:e}},Je=te("cart",()=>{const e=b(JSON.parse(localStorage.getItem("cart"))||[]),t=M(()=>e.value.reduce((i,c)=>i+c.quantity,0)),n=M(()=>e.value.reduce((i,c)=>{const m=c.totalPrice||c.price;return i+m*c.quantity},0));function r(i,c=1){const m=Be({id:i.id,name:i.name,price:i.price,quantity:c});if(m)throw new Error(m);if(c>10)throw new Error("Số lượng mỗi sản phẩm không được quá 10");const _=e.value.find(g=>g.id===i.id&&!g.cartId&&(!g.selectedToppings||g.selectedToppings.length===0));if(_){const g=_.quantity+c;if(g>10)throw new Error("Tổng số lượng sản phẩm này trong giỏ hàng không được quá 10");_.quantity=g}else e.value.push(B(N({},i),{quantity:c,selectedToppings:[],toppingsPrice:0,totalPrice:i.price,cartId:`${i.id}_simple_${Date.now()}`}));u()}function s(i){e.value.push(i),u()}function d(i){const c=e.value.findIndex(m=>m.cartId===i||m.id===i);c>-1&&(e.value.splice(c,1),u())}function o(i,c){const m=e.value.find(_=>_.cartId===i||_.id===i);m&&(c<=0?d(i):(m.quantity=c,u()))}function h(){e.value=[],u()}function u(){localStorage.setItem("cart",JSON.stringify(e.value))}return{items:e,totalItems:t,totalPrice:n,addToCart:r,addToCartWithToppings:s,removeFromCart:d,updateQuantity:o,clearCart:h}}),ye="http://localhost:3001",ce=1e4,ee=new Map,Ue=300*1e3,We=(e,t)=>{},Ge=(e,t,n)=>{},Ke=(e,t)=>`${e}_${JSON.stringify(t||{})}`,Fe=e=>{const t=ee.get(e);return t&&Date.now()-t.timestamp<Ue?t.data:(ee.delete(e),null)},Qe=(e,t)=>{ee.set(e,{data:t,timestamp:Date.now()})};function k(n){return S(this,arguments,function*(e,t={}){const r=performance.now(),s=`${ye}${e}`,d=Ke(s,t);if(!t.method||t.method==="GET"){const o=Fe(d);if(o)return o}try{We(s,t);const o=new AbortController,h=setTimeout(()=>o.abort(),ce),u=yield fetch(s,N({signal:o.signal,headers:N({"Content-Type":"application/json",Accept:"application/json"},t.headers)},t));clearTimeout(h);const i=Math.round(performance.now()-r);if(!u.ok)throw new Error(`HTTP ${u.status}: ${u.statusText}`);const c=yield u.json();return(!t.method||t.method==="GET")&&Qe(d,c),Ge(s,u,i),c}catch(o){const h=Math.round(performance.now()-r);if(o.name==="AbortError"){const i=new Error(`Request timeout after ${ce}ms`);throw i.isTimeout=!0,i}const u=new Error(o.message);throw u.url=s,u.duration=h,u.options=t,u.originalError=o,u}})}const Xe={getAll:()=>k("/products"),getById:e=>k(`/products/${e}`),create:e=>k("/products",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>k(`/products/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>k(`/products/${e}`,{method:"DELETE"})},Ze={getAll:()=>k("/toppings"),getById:e=>k(`/toppings/${e}`)},Ye={getAll:()=>k("/options"),getSizes:()=>k("/options?type=size"),getIceLevels:()=>k("/options?type=ice"),getSugarLevels:()=>k("/options?type=sugar")},et={getAll:()=>k("/users"),getById:e=>k(`/users/${e}`),create:e=>k("/users",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>k(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)})},tt={getAll:()=>k("/orders"),getById:e=>k(`/orders/${e}`),getByUserId:e=>k(`/orders?userId=${e}`),create:e=>k("/orders",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>k(`/orders/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>k(`/orders/${e}`,{method:"DELETE"})},nt={getAll:()=>k("/bannerImages")},at=()=>S(null,null,function*(){try{return yield fetch(`${ye}/products`),!0}catch(e){return!1}}),$={products:Xe,toppings:Ze,options:Ye,users:et,orders:tt,bannerImages:nt,healthCheck:at},rt=te("auth",()=>{const e=b(null),t=b(!1),n=b(null),r=b([]),s=M(()=>!!e.value),d=M(()=>e.value?e.value.fullName||e.value.email:""),o=g=>S(null,null,function*(){t.value=!0,n.value=null;try{const y={email:L(g.email),password:g.password};if(!y.email.includes("@"))throw new Error("Email không hợp lệ");yield new Promise(f=>setTimeout(f,1e3));const I=JSON.parse(localStorage.getItem("chatramue_users")||"[]").find(f=>f.email===y.email&&f.password===y.password);if(!I)throw new Error("Email hoặc mật khẩu không đúng");const v=I,{password:p}=v,a=K(v,["password"]);return e.value=a,localStorage.setItem("chatramue_current_user",JSON.stringify(a)),{success:!0}}catch(y){return n.value=y.message,{success:!1,error:y.message}}finally{t.value=!1}}),h=g=>S(null,null,function*(){t.value=!0,n.value=null;try{const y=le(g);if(!y.isValid)throw new Error("Dữ liệu đăng ký không hợp lệ: "+y.errors.join(", "));const O={email:L(g.email),fullName:L(g.fullName),phone:L(g.phone),address:L(g.address),password:g.password};yield new Promise(P=>setTimeout(P,1e3));const I=JSON.parse(localStorage.getItem("chatramue_users")||"[]");if(I.some(P=>P.email===O.email))throw new Error("Email này đã được đăng ký");const p={id:Date.now().toString(),email:O.email,password:O.password,fullName:O.fullName,phone:O.phone,address:O.address,createdAt:new Date().toISOString()};I.push(p),localStorage.setItem("chatramue_users",JSON.stringify(I));const v=p,{password:a}=v,f=K(v,["password"]);return e.value=f,localStorage.setItem("chatramue_current_user",JSON.stringify(f)),{success:!0}}catch(y){return n.value=y.message,{success:!1,error:y.message}}finally{t.value=!1}}),u=()=>{e.value=null,r.value=[],localStorage.removeItem("chatramue_current_user")},i=()=>{const g=localStorage.getItem("chatramue_current_user");if(g)try{e.value=JSON.parse(g),m()}catch(v){localStorage.removeItem("chatramue_current_user")}},c=g=>{if(!e.value)return;const v={id:Date.now().toString(),userId:e.value.id,items:g.items,total:g.total,customer:g.customer,orderDate:new Date().toISOString(),status:"pending"};r.value.unshift(v);const y=JSON.parse(localStorage.getItem("chatramue_orders")||"[]");return y.unshift(v),localStorage.setItem("chatramue_orders",JSON.stringify(y)),v},m=()=>{if(!e.value)return[];const g=JSON.parse(localStorage.getItem("chatramue_orders")||"[]");return r.value=g.filter(v=>v.userId===e.value.id),r.value};return{user:e,isLoading:t,error:n,orders:r,isAuthenticated:s,userDisplayName:d,login:o,register:h,logout:u,checkAuthStatus:i,updateProfile:g=>S(null,null,function*(){t.value=!0,n.value=null;try{const v=le(g);if(!v.isValid)throw new Error("Dữ liệu cập nhật không hợp lệ: "+v.errors.join(", "));const y={};Object.keys(g).forEach(a=>{a!=="password"?y[a]=L(g[a]):y[a]=g[a]}),yield new Promise(a=>setTimeout(a,500));const O=N(N({},e.value),y);e.value=O,localStorage.setItem("chatramue_current_user",JSON.stringify(O));const I=JSON.parse(localStorage.getItem("chatramue_users")||"[]"),p=I.findIndex(a=>a.id===e.value.id);return p!==-1&&(I[p]=N(N({},I[p]),y),localStorage.setItem("chatramue_users",JSON.stringify(I))),{success:!0}}catch(v){return n.value=v.message,{success:!1,error:v.message}}finally{t.value=!1}}),addOrder:c,loadOrders:m}}),Te=e=>`/Chatramue-Website-Demo/${e.startsWith("/")?e.slice(1):e}`,H=e=>e.map(t=>B(N({},t),{image:Te(t.image)})),J=e=>e.map(t=>B(N({},t),{src:Te(t.src)})),U=[{id:1,slug:"tra-sua-thai-do",name:"Trà sữa Thái đỏ",price:45e3,image:"/images/005_d5c43865-bc4f-4834-b533-79860c70e26b_300x300.png",description:"Hỗn hợp trà đỏ của ChaTraMue được trồng và thu hoạch độc quyền từ các vùng núi mát mẻ ở Thái Lan. Trà tỏa ra hương thơm thanh lịch cùng với vị ngọt và hương vị dễ chịu. Trà ngon nhất khi dùng với sữa, có thể thưởng thức nóng hoặc đá.",category:"tra-sua",featured:!0,availableToppings:["bubble","crystal","jelly","pudding","coconut"]},{id:2,slug:"tra-sua-thai-xanh",name:"Trà sữa Thái xanh",price:45e3,image:"/images/GREEN_TEA_MIX_BAG_300x300.png",description:"Hỗn hợp trà xanh của ChaTraMue được trồng và thu hoạch độc quyền từ các vùng núi mát mẻ ở Thái Lan. Trà tỏa ra hương thơm thanh lịch cùng với vị ngọt và hương vị dễ chịu. Trà ngon nhất khi dùng với sữa, có thể thưởng thức nóng hoặc đá.",category:"tra-sua",featured:!0,availableToppings:["bubble","crystal","jelly","pudding","coconut"]},{id:3,slug:"tra-sua-hoa-hong",name:"Trà sữa Hoa Hồng",price:48e3,image:"/images/Rose_300x300.png",description:"Sự kết hợp hoàn hảo giữa trà đen cao cấp và hương hoa hồng tự nhiên, mang đến trải nghiệm thưởng trà độc đáo và lãng mạn. Hương vị thơm ngọt, dịu nhẹ.",category:"tra-sua",featured:!1,availableToppings:["bubble","crystal","jelly","pudding","aloe"]},{id:4,slug:"tra-oolong",name:"Trà Ô Long",price:52e3,image:"/images/OOLONG_BOX_FRONT_1024x1024@2x.webp",description:"Trà Ô Long truyền thống với hương vị đậm đà, được chế biến theo phương pháp cổ truyền. Mang lại cảm giác thư giãn và thanh tịnh.",category:"tra-truyen-thong",featured:!0,availableToppings:["matcha-jelly","aloe"]},{id:5,slug:"tra-chanh",name:"Trà chanh mật ong",price:35e3,image:"/images/Trà chanh.jpg",description:"Sự kết hợp tuyệt vời giữa trà đen thơm ngon, chanh tươi và mật ong nguyên chất. Thức uống giải khát hoàn hảo cho mọi thời điểm.",category:"tra-trai-cay",featured:!0,availableToppings:["jelly","aloe","coconut"]},{id:6,slug:"tra-hoa-nhai",name:"Trà hoa nhài",price:42e3,image:"/images/Jamine_Butterfly_Pea_Tea_Pack002_300x300.png",description:"Trà hoa nhài với hương thơm dịu nhẹ, thanh mát. Được pha chế từ những cánh hoa nhài tươi ngon nhất, mang lại cảm giác thư thái.",category:"tra-hoa",featured:!1,availableToppings:["matcha-jelly","aloe","coconut"]}],F=[{id:"bubble",name:"Trân châu đen",price:5e3},{id:"crystal",name:"Trân châu trắng",price:5e3},{id:"jelly",name:"Thạch cà phê",price:6e3},{id:"pudding",name:"Pudding",price:8e3},{id:"coconut",name:"Dừa nạo",price:4e3},{id:"matcha-jelly",name:"Thạch matcha",price:5e3},{id:"aloe",name:"Nha đam",price:6e3}],Q=[{id:"no-ice",name:"Không đá",value:0},{id:"little-ice",name:"Ít đá (25%)",value:25},{id:"normal-ice",name:"Đá vừa (50%)",value:50},{id:"more-ice",name:"Nhiều đá (75%)",value:75},{id:"full-ice",name:"Đá đầy (100%)",value:100}],X=[{id:"no-sugar",name:"Không đường",value:0},{id:"little-sugar",name:"Ít đường (25%)",value:25},{id:"normal-sugar",name:"Đường vừa (50%)",value:50},{id:"more-sugar",name:"Nhiều đường (75%)",value:75},{id:"full-sugar",name:"Đường đầy (100%)",value:100}],Z=[{id:"size-s",name:"Size S",value:"S",priceMultiplier:.8},{id:"size-m",name:"Size M",value:"M",priceMultiplier:1},{id:"size-l",name:"Size L",value:"L",priceMultiplier:1.2}],Y=[{id:1,src:"/images/481514790_1039929878172347_8606832626822187572_n.png"},{id:2,src:"/images/474498460_956587323303302_7346476874932876470_n.jpg"},{id:3,src:"/images/499236007_1099898072175527_6959317534763466490_n.png"},{id:4,src:"/images/474505017_1006400948191907_1524309964112798066_n.jpg"},{id:5,src:"/images/486574918_1055629866602348_7146931616085191084_n.jpg"},{id:6,src:"/images/Chraming_Thai_Tea_Cover2.webp"}],st=te("data",()=>{console.log("Data store initialized");const e=b(!1),t=b([]),n=b([]),r=b([]),s=b([]),d=b([]),o=b([]),h=b(!1),u=b(null),i=()=>S(null,null,function*(){try{return e.value=yield $.checkHealth(),e.value}catch(p){return e.value=!1,!1}}),c=()=>S(null,null,function*(){h.value=!0,u.value=null;try{if(e.value){const p=yield $.products.getAll();t.value=H(p)}else t.value=H(U)}catch(p){u.value=p.message,t.value=H(U)}finally{h.value=!1}}),m=()=>S(null,null,function*(){try{e.value?n.value=yield $.toppings.getAll():n.value=F}catch(p){n.value=F}}),_=()=>S(null,null,function*(){try{if(e.value){const[p,a,f]=yield Promise.all([$.options.getIceOptions(),$.options.getSugarOptions(),$.options.getSizeOptions()]);r.value=p,s.value=a,d.value=f}else r.value=Q,s.value=X,d.value=Z}catch(p){r.value=Q,s.value=X,d.value=Z}}),g=()=>S(null,null,function*(){try{if(e.value){const p=yield $.bannerImages.getAll();o.value=J(p).map(a=>a.src)}else{const p=J(Y);o.value=p.map(a=>a.src)}}catch(p){const a=J(Y);o.value=a.map(f=>f.src)}});return{isApiAvailable:e,products:t,toppings:n,iceOptions:r,sugarOptions:s,sizeOptions:d,bannerImages:o,isLoading:h,error:u,checkApiHealth:i,initializeData:()=>S(null,null,function*(){console.log("Initializing data..."),console.log("Static products:",U),t.value=H(U),n.value=F,r.value=Q,s.value=X,d.value=Z;const p=J(Y);o.value=p.map(a=>a.src),console.log("Static data loaded:",{products:t.value.length,bannerImages:o.value.length}),i().then(()=>{e.value&&(c(),m(),_(),g())})}),loadProducts:c,loadToppings:m,loadOptions:_,loadBanners:g,getProductBySlug:p=>S(null,null,function*(){return t.value.length===0&&(yield c()),t.value.find(a=>a.slug===p)}),getFeaturedProducts:()=>S(null,null,function*(){return t.value.length===0&&(yield c()),t.value.filter(p=>p.featured)}),searchProducts:p=>S(null,null,function*(){t.value.length===0&&(yield c());const a=L(p);if(!a||a.length<2)return[];const f=a.toLowerCase();return t.value.filter(P=>P.name.toLowerCase().includes(f)||P.description.toLowerCase().includes(f))})}}),q=b([]);function we(){const e=(r,s="success",d=3e3)=>{const o=Date.now(),h={id:o,message:r,type:s,duration:d};return q.value.push(h),setTimeout(()=>{t(o)},d),o},t=r=>{const s=q.value.findIndex(d=>d.id===r);s>-1&&q.value.splice(s,1)};return{notifications:q,showNotification:e,addNotification:e,removeNotification:t,clearAllNotifications:()=>{q.value=[]}}}const ot={class:"logo"},it={class:"dropdown"},lt={class:"dropdown-content"},ct={class:"cart-icon"},ut={key:0,class:"cart-count"},dt={class:"auth-menu"},ht={key:0,class:"user-menu"},gt={key:1,class:"auth-links"},pt={key:0,class:"search-result",style:{display:"block",position:"absolute",top:"124px",right:"40px","z-index":"200",background:"#fff","border-radius":"8px","box-shadow":"0 2px 12px rgba(0,0,0,0.08)","min-width":"320px","max-width":"420px"}},mt=["src","alt"],ft={__name:"Header",setup(e){const t=de(),n=Je(),r=rt(),s=st(),{showNotification:d}=we(),o=b(!1),h=b(!1),u=b(""),i=b(null),c=M(()=>{if(!u.value.trim())return[];const p=u.value.toLowerCase();return s.products.filter(a=>a.name.toLowerCase().includes(p)).slice(0,5)}),m=()=>S(null,null,function*(){var p;o.value=!0,yield Oe(),(p=i.value)==null||p.focus()}),_=()=>{o.value=!1,u.value=""},g=()=>{h.value=!h.value},v=()=>{h.value=!1},y=()=>{r.logout(),v(),d("Đăng xuất thành công!","success"),t.push("/")},O=()=>{},I=p=>{!p.target.closest(".search-box")&&!p.target.closest(".search-icon")&&!p.target.closest(".search-result")&&(o.value=!1),p.target.closest(".user-menu")||(h.value=!1)};return he(()=>{document.addEventListener("click",I),r.checkAuthStatus()}),Ee(()=>{document.removeEventListener("click",I)}),(p,a)=>{const f=ge("router-link");return E(),A("header",null,[l("div",ot,[w(f,{to:"/"},{default:T(()=>a[1]||(a[1]=[l("img",{src:je,alt:"ChaTraMue Logo"},null,-1)])),_:1,__:[1]})]),l("nav",null,[l("ul",null,[l("li",null,[w(f,{to:"/"},{default:T(()=>a[2]||(a[2]=[C("Trang chủ",-1)])),_:1,__:[2]})]),l("li",null,[w(f,{to:"/about"},{default:T(()=>a[3]||(a[3]=[C("Giới thiệu",-1)])),_:1,__:[3]})]),l("li",it,[w(f,{to:"/products",class:"dropbtn"},{default:T(()=>a[4]||(a[4]=[C("Sản phẩm",-1)])),_:1,__:[4]}),l("ul",lt,[l("li",null,[w(f,{to:"/product/tra-sua-thai-xanh"},{default:T(()=>a[5]||(a[5]=[C("Trà Thái Xanh",-1)])),_:1,__:[5]})]),l("li",null,[w(f,{to:"/product/tra-sua-thai-do"},{default:T(()=>a[6]||(a[6]=[C("Trà Thái Đỏ",-1)])),_:1,__:[6]})]),l("li",null,[w(f,{to:"/product/tra-sua-hoa-hong"},{default:T(()=>a[7]||(a[7]=[C("Trà Sữa Hoa Hồng",-1)])),_:1,__:[7]})]),l("li",null,[w(f,{to:"/product/tra-oolong"},{default:T(()=>a[8]||(a[8]=[C("Trà Ô Long",-1)])),_:1,__:[8]})]),l("li",null,[w(f,{to:"/product/tra-chanh"},{default:T(()=>a[9]||(a[9]=[C("Trà Chanh Mật Ong",-1)])),_:1,__:[9]})]),l("li",null,[w(f,{to:"/product/tra-hoa-nhai"},{default:T(()=>a[10]||(a[10]=[C("Trà Hoa Nhài",-1)])),_:1,__:[10]})])])]),l("li",null,[w(f,{to:"/contact"},{default:T(()=>a[11]||(a[11]=[C("Liên hệ",-1)])),_:1,__:[11]})])])]),l("div",{class:"search-icon",onClick:m},a[12]||(a[12]=[l("i",{class:"fa-solid fa-magnifying-glass"},null,-1)])),l("div",ct,[w(f,{to:"/shopping-cart"},{default:T(()=>[a[13]||(a[13]=l("i",{class:"fa-solid fa-shopping-cart"},null,-1)),D(n).totalItems>0?(E(),A("span",ut,R(D(n).totalItems),1)):W("",!0)]),_:1,__:[13]})]),l("div",dt,[D(r).isAuthenticated?(E(),A("div",ht,[l("div",{class:"user-avatar",onClick:g},[a[14]||(a[14]=l("i",{class:"fas fa-user"},null,-1)),l("span",null,R(D(r).userDisplayName),1),a[15]||(a[15]=l("i",{class:"fas fa-chevron-down"},null,-1))]),l("div",{class:j(["user-dropdown",{active:h.value}])},[w(f,{to:"/profile",onClick:v},{default:T(()=>a[16]||(a[16]=[l("i",{class:"fas fa-user"},null,-1),C(" Tài khoản của tôi ",-1)])),_:1,__:[16]}),w(f,{to:"/profile?tab=orders",onClick:v},{default:T(()=>a[17]||(a[17]=[l("i",{class:"fas fa-shopping-bag"},null,-1),C(" Đơn hàng của tôi ",-1)])),_:1,__:[17]}),l("button",{onClick:y},a[18]||(a[18]=[l("i",{class:"fas fa-sign-out-alt"},null,-1),C(" Đăng xuất ",-1)]))],2)])):(E(),A("div",gt,[w(f,{to:"/login",class:"login-btn"},{default:T(()=>a[19]||(a[19]=[C("Đăng nhập",-1)])),_:1,__:[19]}),w(f,{to:"/register",class:"register-btn"},{default:T(()=>a[20]||(a[20]=[C("Đăng ký",-1)])),_:1,__:[20]})]))]),l("div",{class:j(["search-box",{active:o.value}])},[Ie(l("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=P=>u.value=P),onKeydown:[ie(O,["enter"]),ie(_,["escape"])],placeholder:"Tìm kiếm sản phẩm...",ref_key:"searchInput",ref:i},null,544),[[Ce,u.value]]),l("button",{onClick:O},a[21]||(a[21]=[l("i",{class:"fa-solid fa-magnifying-glass"},null,-1)])),l("button",{onClick:_,type:"button"},a[22]||(a[22]=[l("i",{class:"fa-solid fa-xmark"},null,-1)]))],2),c.value.length>0&&o.value?(E(),A("div",pt,[(E(!0),A(pe,null,me(c.value,P=>(E(),G(f,{key:P.slug,to:`/product/${P.slug}`,onClick:_,style:{display:"flex","align-items":"center",padding:"10px 16px","text-decoration":"none",color:"#222",gap:"12px","border-bottom":"1px solid #eee"}},{default:T(()=>[l("img",{src:P.image,alt:P.name,style:{width:"40px",height:"40px","object-fit":"contain","border-radius":"6px"}},null,8,mt),l("span",null,R(P.name),1)]),_:2},1032,["to"]))),128))])):W("",!0)])}}},vt={class:"main-footer"},_t={__name:"Footer",setup(e){return(t,n)=>(E(),A("footer",vt,n[0]||(n[0]=[l("div",{class:"footer-container"},[l("div",{class:"footer-bottom"},[l("p",null,"© 2025 ChaTraMue Việt Nam. All rights reserved.")])],-1)])))}},yt={class:"notification-container"},Tt=["onClick"],wt={class:"notification-content"},bt={__name:"NotificationToast",setup(e){const{notifications:t,removeNotification:n}=we(),r=s=>{switch(s){case"success":return"fa-solid fa-check-circle";case"error":return"fa-solid fa-exclamation-circle";case"warning":return"fa-solid fa-exclamation-triangle";case"info":return"fa-solid fa-info-circle";default:return"fa-solid fa-bell"}};return(s,d)=>(E(),G(Ae,{to:"body"},[l("div",yt,[w(Pe,{name:"notification",tag:"div"},{default:T(()=>[(E(!0),A(pe,null,me(D(t),o=>(E(),A("div",{key:o.id,class:j(["notification",`notification--${o.type}`]),onClick:h=>D(n)(o.id)},[l("div",wt,[l("i",{class:j(r(o.type))},null,2),l("span",null,R(o.message),1)])],10,Tt))),128))]),_:1})])]))}},kt={key:0,class:"page-loading","aria-label":"Đang tải..."},St={id:"main-content",class:"main-content",role:"main"},Et={key:1,class:"error-boundary"},It={__name:"App",setup(e){const n=b(!0),r=b(!1),s=b(""),d=de();M(()=>({"is-loading":n.value,"has-error":r.value,"is-dev":!1})),xe((c,m,_)=>(console.error("App Error Captured:",c),console.error("Component:",m),console.error("Info:",_),r.value=!0,s.value=c.message||"Đã xảy ra lỗi không xác định",!1)),he(()=>{o(),d.isReady().then(()=>{n.value=!1,console.log("🧋 ChaTraMue App loaded successfully!")})});const o=()=>{document.title="ChaTraMue Việt Nam";const c=document.querySelector('meta[name="description"]');c&&(c.content="Website bán trà thái chính hiệu"),h(),u()},h=()=>{const c=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",c)},u=()=>{const c=()=>{navigator.onLine||console.warn("App is offline")};window.addEventListener("online",c),window.addEventListener("offline",c)},i=()=>{window.location.reload()};return window.addEventListener("unhandledrejection",c=>{console.error("Unhandled promise rejection:",c.reason),r.value=!0,s.value="Đã xảy ra lỗi kết nối"}),(c,m)=>{const _=ge("router-view");return E(),A("div",{id:"app",class:j({"is-loading":n.value})},[n.value?(E(),A("div",kt)):W("",!0),m[2]||(m[2]=l("a",{href:"#main-content",class:"skip-link"}," Chuyển đến nội dung chính ",-1)),w(ft),l("main",St,[(E(),G(Ne,null,{fallback:T(()=>m[0]||(m[0]=[l("div",{class:"route-loading"},[l("div",{class:"loading-spinner"}),l("p",null,"Đang tải trang...")],-1)])),default:T(()=>[w(_,null,{default:T(({Component:g,route:v})=>[w(Le,{name:v.meta.transition||"fade",mode:"out-in",appear:""},{default:T(()=>[(E(),G($e(g),{key:v.fullPath}))]),_:2},1032,["name"])]),_:1})]),_:1}))]),w(_t),w(bt),r.value&&D(!1)?(E(),A("div",Et,[m[1]||(m[1]=l("h3",null,"Đã xảy ra lỗi",-1)),l("p",null,R(s.value),1),l("button",{onClick:i},"Tải lại trang")])):W("",!0)],2)}}},Ct="modulepreload",Ot=function(e){return"/Chatramue-Website-Demo/"+e},ue={},x=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let o=function(i){return Promise.all(i.map(c=>Promise.resolve(c).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),u=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));s=o(n.map(i=>{if(i=Ot(i),i in ue)return;ue[i]=!0;const c=i.endsWith(".css"),m=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${m}`))return;const _=document.createElement("link");if(_.rel=c?"stylesheet":Ct,c||(_.as="script"),_.crossOrigin="",_.href=i,u&&_.setAttribute("nonce",u),document.head.appendChild(_),c)return new Promise((g,v)=>{_.addEventListener("load",g),_.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${i}`)))})}))}function d(o){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=o,window.dispatchEvent(h),!h.defaultPrevented)throw o}return s.then(o=>{for(const h of o||[])h.status==="rejected"&&d(h.reason);return t().catch(d)})},Pt=()=>x(()=>import("./Home-Be1-m5ee.js"),__vite__mapDeps([0,1])),At=()=>x(()=>import("./About-RT28zJ6L.js"),__vite__mapDeps([2,1])),xt=()=>x(()=>import("./Products-D6W_-gQF.js"),__vite__mapDeps([3,1,4,5,6])),Nt=()=>x(()=>import("./Contact-CCzBoqYe.js"),__vite__mapDeps([7,1])),Lt=()=>x(()=>import("./ProductDetail-Chn9AZOV.js"),__vite__mapDeps([8,1,4])),$t=()=>x(()=>import("./ShoppingCart-CLJxRvAm.js"),__vite__mapDeps([9,1])),Dt=()=>x(()=>import("./CheckOut-BqU_roZe.js"),__vite__mapDeps([10,1])),Mt=()=>x(()=>import("./Login-Cll7AkQg.js"),__vite__mapDeps([11,1])),qt=()=>x(()=>import("./Register-rKqRur0_.js"),__vite__mapDeps([12,1])),Rt=()=>x(()=>import("./Profile-B0xUCvv0.js"),__vite__mapDeps([13,1])),jt=()=>x(()=>import("./NotFound-DmCSbZEd.js"),__vite__mapDeps([14,5,1])),zt=[{path:"/",name:"home",component:Pt,meta:{title:"ChaTraMue - Trang chủ",description:"Trà thái chính hiệu ChaTraMue Việt Nam"}},{path:"/about",name:"about",component:At,meta:{title:"Giới thiệu - ChaTraMue",description:"Tìm hiểu về thương hiệu trà thái ChaTraMue"}},{path:"/products",name:"products",component:xt,meta:{title:"Sản phẩm - ChaTraMue",description:"Khám phá các loại trà thái đặc biệt từ ChaTraMue"}},{path:"/product/:slug",name:"product-detail",component:Lt,props:!0,meta:{title:"Chi tiết sản phẩm - ChaTraMue",description:"Thông tin chi tiết sản phẩm trà thái"}},{path:"/contact",name:"contact",component:Nt,meta:{title:"Liên hệ - ChaTraMue",description:"Thông tin liên hệ và địa chỉ cửa hàng ChaTraMue"}},{path:"/cart",name:"cart",component:$t,alias:["/shopping-cart"],meta:{title:"Giỏ hàng - ChaTraMue",description:"Giỏ hàng của bạn"}},{path:"/checkout",name:"checkout",component:Dt,meta:{requiresAuth:!0,title:"Thanh toán - ChaTraMue",description:"Hoàn tất đơn hàng"}},{path:"/login",name:"login",component:Mt,meta:{requiresGuest:!0,title:"Đăng nhập - ChaTraMue",description:"Đăng nhập tài khoản"}},{path:"/register",name:"register",component:qt,meta:{requiresGuest:!0,title:"Đăng ký - ChaTraMue",description:"Tạo tài khoản mới"}},{path:"/profile",name:"profile",component:Rt,meta:{requiresAuth:!0,title:"Hồ sơ - ChaTraMue",description:"Thông tin tài khoản cá nhân"}},{path:"/:pathMatch(.*)*",name:"not-found",component:jt,meta:{title:"Không tìm thấy trang - ChaTraMue",description:"Trang bạn tìm kiếm không tồn tại"}}],ne=De({history:Me("/Chatramue-Website-Demo/"),routes:zt,scrollBehavior(e,t,n){return n||(e.hash?{el:e.hash,behavior:"smooth"}:{top:0,behavior:"smooth"})}});ne.beforeEach((e,t,n)=>S(null,null,function*(){if(e.meta.title&&(document.title=e.meta.title),e.meta.description){const r=document.querySelector('meta[name="description"]');r&&r.setAttribute("content",e.meta.description)}if(typeof window!="undefined"){const r=document.querySelector(".page-loading");r&&(r.style.display="block")}n()}));ne.afterEach(()=>{typeof window!="undefined"&&setTimeout(()=>{const e=document.querySelector(".page-loading");e&&(e.style.display="none")},100)});const ae=!1,Vt=(e,t,n)=>{},z=qe(It);z.config.errorHandler=Vt;const Bt=Re();z.use(Bt);z.use(ne);z.config.globalProperties.$isDev=ae;try{z.mount("#app")}catch(e){console.error("Failed to mount Vue app:",e)}"serviceWorker"in navigator&&!ae&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("SW registered: ",e)}).catch(e=>{console.log("SW registration failed: ",e)})});export{je as _,Je as a,we as b,rt as c,Ut as d,fe as e,le as f,Te as g,L as s,st as u,Be as v};
