var P=(x,b,n)=>new Promise((i,d)=>{var p=a=>{try{h(n.next(a))}catch(m){d(m)}},e=a=>{try{h(n.throw(a))}catch(m){d(m)}},h=a=>a.done?i(a.value):Promise.resolve(a.value).then(p,e);h((n=n.apply(x,b)).next())});import{r as k,N as E,c as T,e as c,g as o,I as S,h as _,l as u,v,k as t,O as C,n as M,L as D,j as f,t as N,i as K,w as j,b as B,u as O,f as g}from"./vendor-cBPYqRmV.js";import{c as R,f as y,b as z}from"./index-bjyb_TEr.js";const I={class:"auth-section"},L={class:"auth-container"},$={class:"auth-card"},A={class:"form-row"},F={class:"form-group"},H=["disabled"],X={class:"form-group"},G=["disabled"],J={class:"form-group"},Q=["disabled"],W={class:"form-row"},Y={class:"form-group"},Z={class:"password-input"},ss=["type","disabled"],es=["disabled"],os={class:"form-group"},as={class:"password-input"},rs=["type","disabled"],ts=["disabled"],ls={class:"form-group"},ns=["disabled"],is={class:"form-group"},ds={for:"agreeTerms",class:"checkbox-label"},us=["disabled"],ps={key:0,class:"error-message"},ms={key:1,class:"error-message"},fs=["disabled"],hs={key:0,class:"fas fa-spinner fa-spin"},cs={class:"auth-footer"},ws={__name:"Register",setup(x){const b=O(),n=R(),{showNotification:i}=z(),d=k(!1),p=k(!1),e=E({fullName:"",email:"",phone:"",password:"",confirmPassword:"",address:"",agreeTerms:!1}),h=k({}),{isLoading:a,error:m}=n,V=T(()=>{const l=y({fullName:e.fullName,email:e.email,phone:e.phone,password:e.password,address:e.address});if(h.value=l.errors,e.password&&e.confirmPassword&&e.password!==e.confirmPassword)return"Mật khẩu xác nhận không khớp";const s=Object.keys(l.errors);return s.length>0?l.errors[s[0]]:null}),U=T(()=>y({fullName:e.fullName,email:e.email,phone:e.phone,password:e.password,address:e.address}).isValid&&e.fullName&&e.email&&e.password&&e.confirmPassword&&e.password===e.confirmPassword&&e.password.length>=6&&e.agreeTerms),q=()=>P(null,null,function*(){const l=y({fullName:e.fullName,email:e.email,phone:e.phone,password:e.password,address:e.address});if(!l.isValid){const w=Object.values(l.errors)[0];i(w,"error");return}if(e.password!==e.confirmPassword){i("Mật khẩu xác nhận không khớp","error");return}if(!e.agreeTerms){i("Vui lòng đồng ý với điều khoản sử dụng","error");return}const s=yield n.register(l.sanitizedData);s.success?(i("Đăng ký thành công! Chào mừng bạn đến với Cha Trà Mue!","success"),b.push("/")):i(s.error,"error")});return(l,s)=>{const w=B("router-link");return g(),c("div",I,[o("div",L,[o("div",$,[s[20]||(s[20]=o("h2",null,"Đăng Ký Tài Khoản",-1)),o("form",{onSubmit:S(q,["prevent"]),class:"auth-form"},[o("div",A,[o("div",F,[s[9]||(s[9]=o("label",{for:"fullName"},"Họ và tên *",-1)),u(o("input",{type:"text",id:"fullName","onUpdate:modelValue":s[0]||(s[0]=r=>e.fullName=r),disabled:t(a),required:"",placeholder:"Nhập họ và tên"},null,8,H),[[v,e.fullName]])]),o("div",X,[s[10]||(s[10]=o("label",{for:"phone"},"Số điện thoại",-1)),u(o("input",{type:"tel",id:"phone","onUpdate:modelValue":s[1]||(s[1]=r=>e.phone=r),disabled:t(a),placeholder:"Nhập số điện thoại"},null,8,G),[[v,e.phone]])])]),o("div",J,[s[11]||(s[11]=o("label",{for:"email"},"Email *",-1)),u(o("input",{type:"email",id:"email","onUpdate:modelValue":s[2]||(s[2]=r=>e.email=r),disabled:t(a),required:"",placeholder:"Nhập email của bạn"},null,8,Q),[[v,e.email]])]),o("div",W,[o("div",Y,[s[12]||(s[12]=o("label",{for:"password"},"Mật khẩu *",-1)),o("div",Z,[u(o("input",{type:d.value?"text":"password",id:"password","onUpdate:modelValue":s[3]||(s[3]=r=>e.password=r),disabled:t(a),required:"",placeholder:"Nhập mật khẩu",minlength:"6"},null,8,ss),[[C,e.password]]),o("button",{type:"button",class:"password-toggle",onClick:s[4]||(s[4]=r=>d.value=!d.value),disabled:t(a)},[o("i",{class:M(d.value?"fas fa-eye-slash":"fas fa-eye")},null,2)],8,es)])]),o("div",os,[s[13]||(s[13]=o("label",{for:"confirmPassword"},"Xác nhận mật khẩu *",-1)),o("div",as,[u(o("input",{type:p.value?"text":"password",id:"confirmPassword","onUpdate:modelValue":s[5]||(s[5]=r=>e.confirmPassword=r),disabled:t(a),required:"",placeholder:"Nhập lại mật khẩu",minlength:"6"},null,8,rs),[[C,e.confirmPassword]]),o("button",{type:"button",class:"password-toggle",onClick:s[6]||(s[6]=r=>p.value=!p.value),disabled:t(a)},[o("i",{class:M(p.value?"fas fa-eye-slash":"fas fa-eye")},null,2)],8,ts)])])]),o("div",ls,[s[14]||(s[14]=o("label",{for:"address"},"Địa chỉ",-1)),u(o("textarea",{id:"address","onUpdate:modelValue":s[7]||(s[7]=r=>e.address=r),disabled:t(a),placeholder:"Nhập địa chỉ của bạn",rows:"3"},null,8,ns),[[v,e.address]])]),o("div",is,[o("label",ds,[u(o("input",{type:"checkbox",id:"agreeTerms","onUpdate:modelValue":s[8]||(s[8]=r=>e.agreeTerms=r),disabled:t(a),required:""},null,8,us),[[D,e.agreeTerms]]),s[15]||(s[15]=o("span",null,[f(" Tôi đồng ý với "),o("a",{href:"#",class:"terms-link"},"Điều khoản sử dụng"),f(" và "),o("a",{href:"#",class:"terms-link"},"Chính sách bảo mật")],-1))])]),V.value?(g(),c("div",ps,[s[16]||(s[16]=o("i",{class:"fas fa-exclamation-triangle"},null,-1)),f(" "+N(V.value),1)])):_("",!0),t(m)?(g(),c("div",ms,[s[17]||(s[17]=o("i",{class:"fas fa-exclamation-triangle"},null,-1)),f(" "+N(t(m)),1)])):_("",!0),o("button",{type:"submit",class:"auth-btn",disabled:t(a)||!U.value},[t(a)?(g(),c("i",hs)):_("",!0),o("span",null,N(t(a)?"Đang tạo tài khoản...":"Đăng Ký"),1)],8,fs)],32),o("div",cs,[o("p",null,[s[19]||(s[19]=f(" Đã có tài khoản? ",-1)),K(w,{to:"/login",class:"auth-link"},{default:j(()=>s[18]||(s[18]=[f("Đăng nhập ngay",-1)])),_:1,__:[18]})])])])])])}}};export{ws as default};
