import{r as g,b as C,e as u,f as d,i as m,g as e,w as f,j as T,t as y,c as _,o as $,l as h,v as x,G as b,H as k,k as w,F as N,p as S,q as V}from"./vendor-cBPYqRmV.js";import{a as B,b as D,u as L}from"./index-bjyb_TEr.js";import{_ as M}from"./ToppingModal-ywI4IQIe.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"product-card"},j=["src","alt"],q={class:"product-price"},F={class:"product-btn-group"},G={__name:"ProductCard",props:{product:{type:Object,required:!0}},setup(s){const n=s,i=B(),{showNotification:l}=D(),r=g(!1),v=o=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(o),a=()=>{n.product.availableToppings&&n.product.availableToppings.length>0?r.value=!0:(i.addToCart(n.product),l(`Đã thêm ${n.product.name} vào giỏ hàng`,"success"))},t=o=>{i.addToCartWithToppings(o);const c=o.selectedToppings.length>0?` với ${o.selectedToppings.map(p=>p.name).join(", ")}`:"";l(`Đã thêm ${o.name}${c} vào giỏ hàng`,"success")};return(o,c)=>{const p=C("router-link");return d(),u("div",A,[m(p,{to:`/product/${s.product.slug}`},{default:f(()=>[e("img",{src:s.product.image,alt:s.product.name},null,8,j)]),_:1},8,["to"]),m(p,{to:`/product/${s.product.slug}`,class:"product-name"},{default:f(()=>[T(y(s.product.name),1)]),_:1},8,["to"]),e("div",q,y(v(s.product.price)),1),e("div",F,[m(p,{to:`/product/${s.product.slug}`,class:"buy-btn"},{default:f(()=>c[1]||(c[1]=[T(" Xem chi tiết ",-1)])),_:1,__:[1]},8,["to"]),e("button",{class:"add-to-cart-btn",onClick:a}," Thêm vào giỏ ")]),m(M,{"is-visible":r.value,product:s.product,onClose:c[0]||(c[0]=W=>r.value=!1),onAddToCart:t},null,8,["is-visible","product"])])}}},U={class:"product-list"},Z={class:"product-header"},z={class:"product-filters"},E={class:"search-box"},H={key:0,class:"loading-state"},K={key:1,class:"no-products"},O={key:2,class:"product-grid"},Q={__name:"Products",setup(s){const n=L(),i=g(""),l=g(""),r=g(""),v=_(()=>{let a=[...n.products];if(i.value){const t=i.value.toLowerCase();a=a.filter(o=>o.name.toLowerCase().includes(t)||o.description.toLowerCase().includes(t))}if(l.value&&(a=a.filter(t=>t.category===l.value)),r.value)switch(r.value){case"name-asc":a.sort((t,o)=>t.name.localeCompare(o.name));break;case"name-desc":a.sort((t,o)=>o.name.localeCompare(t.name));break;case"price-asc":a.sort((t,o)=>t.price-o.price);break;case"price-desc":a.sort((t,o)=>o.price-t.price);break}return a});return $(()=>{n.initializeData()}),(a,t)=>(d(),u("section",U,[e("div",Z,[t[6]||(t[6]=e("h1",null,"Sản phẩm của chúng tôi",-1)),e("div",z,[e("div",E,[h(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>i.value=o),placeholder:"Tìm kiếm sản phẩm...",class:"search-input"},null,512),[[x,i.value]]),t[3]||(t[3]=e("i",{class:"fas fa-search search-icon"},null,-1))]),h(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>l.value=o),class:"category-filter"},t[4]||(t[4]=[k('<option value="" data-v-d3977194>Tất cả danh mục</option><option value="tra-sua" data-v-d3977194>Trà sữa</option><option value="tra-trai-cay" data-v-d3977194>Trà trái cây</option><option value="tra-truyen-thong" data-v-d3977194>Trà truyền thống</option><option value="tra-hoa" data-v-d3977194>Trà hoa</option>',5)]),512),[[b,l.value]]),h(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>r.value=o),class:"sort-filter"},t[5]||(t[5]=[k('<option value="" data-v-d3977194>Sắp xếp theo</option><option value="name-asc" data-v-d3977194>Tên A-Z</option><option value="name-desc" data-v-d3977194>Tên Z-A</option><option value="price-asc" data-v-d3977194>Giá thấp đến cao</option><option value="price-desc" data-v-d3977194>Giá cao đến thấp</option>',5)]),512),[[b,r.value]])])]),w(n).isLoading?(d(),u("div",H,t[7]||(t[7]=[e("p",null,"Đang tải sản phẩm...",-1)]))):v.value.length===0?(d(),u("div",K,t[8]||(t[8]=[e("p",null,"Không tìm thấy sản phẩm nào phù hợp với tiêu chí tìm kiếm.",-1)]))):(d(),u("div",O,[(d(!0),u(N,null,S(v.value,o=>(d(),V(G,{key:o.id,product:o},null,8,["product"]))),128))]))]))}},I=P(Q,[["__scopeId","data-v-d3977194"]]);export{I as default};
