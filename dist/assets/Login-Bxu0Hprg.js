var v=(_,c,i)=>new Promise((u,l)=>{var t=a=>{try{p(i.next(a))}catch(d){l(d)}},o=a=>{try{p(i.throw(a))}catch(d){l(d)}},p=a=>a.done?u(a.value):Promise.resolve(a.value).then(t,o);p((i=i.apply(_,c)).next())});import{r as x,N as C,e as h,g as e,I as V,h as k,l as b,v as D,k as r,O as E,n as L,L as S,j as f,t as w,i as y,w as M,b as q,u as z,f as g}from"./vendor-cBPYqRmV.js";import{c as B,e as T,b as U,s as N}from"./index-bjyb_TEr.js";const I={class:"auth-section"},R={class:"auth-container"},j={class:"auth-card"},A={class:"form-group"},G=["disabled"],O={class:"form-group"},P={class:"password-input"},Q=["type","disabled"],$=["disabled"],F={class:"form-group"},H={for:"rememberMe",class:"checkbox-label"},J=["disabled"],K={key:0,class:"error-message"},W=["disabled"],X={key:0,class:"fas fa-spinner fa-spin"},Y={class:"auth-footer"},ts={__name:"Login",setup(_){const c=z(),i=B(),{showNotification:u}=U(),l=x(!1),t=C({email:"",password:"",rememberMe:!1}),{isLoading:o,error:p}=i,a=()=>v(null,null,function*(){const d=T(t.email);if(d){u(d,"error");return}if(!t.password){u("Mật khẩu không được để trống","error");return}const s={email:N(t.email),password:N(t.password)},m=yield i.login(s);if(m.success){u("Đăng nhập thành công!","success");const n=c.currentRoute.value.query.redirect||"/";c.push(n)}else u(m.error,"error")});return(d,s)=>{const m=q("router-link");return g(),h("div",I,[e("div",R,[e("div",j,[s[11]||(s[11]=e("h2",null,"Đăng Nhập",-1)),e("form",{onSubmit:V(a,["prevent"]),class:"auth-form"},[e("div",A,[s[4]||(s[4]=e("label",{for:"email"},"Email",-1)),b(e("input",{type:"email",id:"email","onUpdate:modelValue":s[0]||(s[0]=n=>t.email=n),disabled:r(o),required:"",placeholder:"Nhập email của bạn"},null,8,G),[[D,t.email]])]),e("div",O,[s[5]||(s[5]=e("label",{for:"password"},"Mật khẩu",-1)),e("div",P,[b(e("input",{type:l.value?"text":"password",id:"password","onUpdate:modelValue":s[1]||(s[1]=n=>t.password=n),disabled:r(o),required:"",placeholder:"Nhập mật khẩu"},null,8,Q),[[E,t.password]]),e("button",{type:"button",class:"password-toggle",onClick:s[2]||(s[2]=n=>l.value=!l.value),disabled:r(o)},[e("i",{class:L(l.value?"fas fa-eye-slash":"fas fa-eye")},null,2)],8,$)])]),e("div",F,[e("label",H,[b(e("input",{type:"checkbox",id:"rememberMe","onUpdate:modelValue":s[3]||(s[3]=n=>t.rememberMe=n),disabled:r(o)},null,8,J),[[S,t.rememberMe]]),s[6]||(s[6]=e("span",null,"Ghi nhớ đăng nhập",-1))])]),r(p)?(g(),h("div",K,[s[7]||(s[7]=e("i",{class:"fas fa-exclamation-triangle"},null,-1)),f(" "+w(r(p)),1)])):k("",!0),e("button",{type:"submit",class:"auth-btn",disabled:r(o)},[r(o)?(g(),h("i",X)):k("",!0),e("span",null,w(r(o)?"Đang đăng nhập...":"Đăng Nhập"),1)],8,W)],32),e("div",Y,[e("p",null,[s[9]||(s[9]=f(" Chưa có tài khoản? ",-1)),y(m,{to:"/register",class:"auth-link"},{default:M(()=>s[8]||(s[8]=[f("Đăng ký ngay",-1)])),_:1,__:[8]})]),y(m,{to:"/forgot-password",class:"forgot-link"},{default:M(()=>s[10]||(s[10]=[f("Quên mật khẩu?",-1)])),_:1,__:[10]})])])])])}}};export{ts as default};
